if (self.CavalryLogger) { CavalryLogger.start_js(["pNkQUbp"]); }

__d("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesTrayTileVideoAutoPlayerWrapper_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerRelayWithSSR_video"},{alias:null,args:null,kind:"ScalarField",name:"viewer_autoplay_setting",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometComposerMagicUploadsAttachmentAreaResource",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a=c("JSResourceForInteraction")("CometComposerMagicUploadsAttachmentArea.react").__setRef("CometComposerMagicUploadsAttachmentAreaResource");b=a;g["default"]=b}),98);
__d("FeedInlineComposerMagicUploadsSprout.react",["fbt","ix","CometComposerMagicUploadsAttachmentAreaResource","CometFeedInlineComposerSprout.react","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");function a(a){var b=a.onHoverIn,d=a.onHoverOut,e=a.onPressIn,f=a.showComposerDialog;a=a.triggerRef;var g=function(){c("CometComposerMagicUploadsAttachmentAreaResource").load(),f({additionalMediaAttachmentItems:[]})};return j.jsx(c("CometFeedInlineComposerSprout.react"),{imageSrc:i("1260669"),label:h._("Photo\/Video"),onHoverIn:b,onHoverOut:d,onPress:g,onPressIn:e,triggerRef:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabContainerNewPreload.re",["MWChatTabContainerNewPreload.bs"],(function(a,b,c,d,e,f){a=b("MWChatTabContainerNewPreload.bs").useHook;f.useHook=a}),null);
__d("useCometHomeOpenNewChatTab",["MWChatOpenNewTab.re","MWChatTabContainerNewPreload.re","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=d("MWChatOpenNewTab.re").useHook.apply(d("MWChatOpenNewTab.re"),arguments),b=d("MWChatTabContainerNewPreload.re").useHook(),c=b[0],e=b[1],f=h(function(){a()},[a]);return{onHoverIn:c,onHoverOut:e,onPress:f}}g["default"]=a}),98);
__d("StoriesTrayTileVideoAutoPlayerSurface.react",["VideoPlayerHooks","VideoPlayerSurface.react","VideoPlayerWithThumbnail.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l=3;function a(a){var b=a.coverImage,e=a.onPlaybackEnded;a=k(0);var f=a[0],g=a[1],m=j(null),n=d("VideoPlayerHooks").useController(),o=d("VideoPlayerHooks").useVideoPlayerTotalLoops();i(function(){m.current=n.getPlayheadPosition();var a=n.subscribe(function(){var a=m.current,b=n.getPlayheadPosition(),c=n.getCurrentState();if(a!=null&&b!==a&&!c.seeking){m.current=b;a=Math.min(c.duration,l);b>=a?(n.seek(0),o>-1&&f>=o?(n.pause("product_initiated"),n.freeze(),e()):g(f+1)):b<0&&n.seek(0)}});return function(){a.remove(),m.current=null}},[n,f,e,o]);return h.jsx(c("VideoPlayerSurface.react"),{children:h.jsx(c("VideoPlayerWithThumbnail.react"),{src:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("StoriesTrayTileVideoAutoPlayerWrapper.react",["CometBackgroundImage.react","CometPlaceholder.react","CometRelay","StoriesGating","StoriesTrayTileVideoAutoPlayerSurface.react","StoriesTrayTileVideoAutoPlayerWrapper_video.graphql","VideoPlayerWithThumbnail.react","deferredLoadComponent","qex","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");e=d("react");var j=e.useCallback,k=e.useState,l=c("deferredLoadComponent")(c("requireDeferred")("VideoPlayerRelayWithSSR.react").__setRef("StoriesTrayTileVideoAutoPlayerWrapper.react"));function a(a){var e,f=a.coverImage;a=a.video;a=d("CometRelay").useFragment(h!==void 0?h:h=b("StoriesTrayTileVideoAutoPlayerWrapper_video.graphql"),a);var g=k(!1),m=g[0],n=g[1];g=j(function(){n(!0)},[]);var o=j(function(){return i.jsx(c("VideoPlayerWithThumbnail.react"),{src:f})},[f]);if(a.viewer_autoplay_setting==="off"||m||d("StoriesGating").shouldOnlyImportVideoComponent())return i.jsx(c("CometBackgroundImage.react"),{src:f});m=d("StoriesGating").shouldOnlyRenderVideoComponent()?"do_not_autoplay":"respect_user_settings";e=((e=c("qex")._("804"))!=null?e:!1)?(e=c("qex")._("805"))!=null?e:3:null;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("CometBackgroundImage.react"),{src:f}),children:i.jsx(l,{bufferEndLimit:e,canAutoplay:m,disableLoadingIndicator:!0,errorBoundaryFallback:function(){return i.jsx(c("CometBackgroundImage.react"),{src:f})},loopCount:2,portalingEnabled:!1,portalingRenderPlaceholder:o,silenceHydrationMutationReporting:!0,subOrigin:"stories_video_preview",video:a,volumeSetting:0,children:i.jsx(c("StoriesTrayTileVideoAutoPlayerSurface.react"),{coverImage:f,onPlaybackEnded:g})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);